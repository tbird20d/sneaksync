Todo file for dropsync:

 - fix problem with violation of transfer_size_limit 
 - lookup_by_path on a part fails, because files don't lookup in sub_entries

 - fix problem with not sync-ing parts
      (was a problem with sha1 caching)
   + add to recalc list during process_transfer
1   + recalc parts when a base file is recalc-ed
   + NEED to recalc parent dirs when a file recalc is done!!
   + recalc child parts when a file recalc is done
   - test fix
     - make sure recalc list is being populated and processed correctly

 - detect that root sha1 did not chang after a receive (that processed
   transfer files), and do a full re-index without a cache
   - this is expensive, but is a last resort if something weird happens
   - get root sha1 from previous dest_index, compare to root sha1
   - just delete dest_index file and do update_index()


 - sanitize all paths
   - verify that all paths are INSIDE the destination directory
     - reject with extreme WARNING any that are not
     - check that os.path.realpath(item).startswith(os.path.realpath(destdir))

 - change is_dir() function to is_dir attribute

== 1.0 features ==
 - automatically run the sender and receiver
   - don't run receiver until transfer files have been synched to destination
     - detect transfer complete (how?)
       - make a transfer list? (only receiver would check it, and it's not
          running)
         - would have list of all expected transfer files
         - receiver can postpone running if transfer files haven't shown up yet
	    - should check frequently and see if anything is changing in sync_dir

== other features ==
 - support USB-stick mode:
   - auto-run on insertion of stick
     - see http://www.instructables.com/id/How-to-make-flash-drive-that-copys-users-files-si/4/
     - add marker file to identify source dir on source machine

   - auto-detect sender or receiver mode
   - sync and unmount when transfer is complete
   - make a test config file for a USB stick

== low-priority bugs ==
   - internal mechanism for tracking transfer files is kludgy
     - current method uses a missing attribute and exceptions
   - dropsync doesn't integrate the logs from each side
   - don't process a transfer file if content size doesn't match
     entry size

== nice-to-have ==
 - read and write updates to index files directly in file instead of in memory
   - allows for arbitrarily large indexes
 - make standalone Windows executable - use py2exe
 - have an option for just comparing source and destination index, to
   report the current size of the difference between the two (how much is
   currently out-of-sync)
 - have period be from start of program, not end of operations
   - so if started at 8:00 am, then run would be 10:00 at (at period 120),
     instead of, say 10:13 (assuming a 13-minute run)
 - support multiple indices (sync-sets) in the same sync_dir
   - allow for specifying the index filename in the config
     - default to source_index and dest_index?
 - keep path of indexed directory in index file (why?)
    (and sanity check before overwriting)
 - avoid errors based on incorrect -r or -s line:
   - have source_dir be empty in receiver config and dest_dir be empty in
	sender config
 - change name to syncdir-amp (for sync_dir amplifier)
 - show progress of operation
   - assume 1000 files-per-minute indexing, and give time estimate
   - measure file copy time, and give time estimate
   - use terminal code to update index line every 2 seconds
     - find total number of files to index first, and give a yy of xx status?
 - if sha1 is OK but other attributes are not, only send entry_line
   - don't send the content, and mark this as an attribute update only
 - use inotify to monitor directories for changes
   - monitor source_dir (sender)
   - monitor sync_dir (sender and receiver)
 - use an option to control 'delete in destination' (don't do it by default)
 - handle permissions correctly

== testing ==
 - support running directly from Windows (check that paths all work)
 - test using different OS for sender and receiver (e.g. Windows to Linux)
   - am using cygwin to Linux, but not Windows to Linux yet

== long-term ideas ==
 - support sending transfer files by e-mail
 - support initiating transfers when phone connects to specific networks
   - e.g. when connected to source network, run sender, and when connected
	to dest network, run receiver, automatically (phone is intermediary)
   - may need to get permission to launch actions on host
 - send deltas instead of full files (lots of work!, but would save bandwidth)
